#!/usr/bin/env sh

INFO=""

command -v $1 2>&1 > /dev/null
if [ $? = 0 ]; then
    INFO="VPN: $(mullvad status) ---"
fi

battery_info=$(upower -i /org/freedesktop/UPower/devices/battery_BAT0)
battery_state=$(echo "$battery_info" | grep 'state' | xargs | cut -d ' ' -f 2)
battery_percentage=$(echo "$battery_info" | grep 'percentage' | xargs | cut -d ' ' -f 2 | cut -d '%' -f 1)

INFO+=" $battery_percentage%"

case $battery_state in
    charging)
        INFO+="âš¡"
        ;;
    discharging)
        echo $battery_percentage
        if [ $battery_percentage -lt 20 ]; then
            INFO+="ðŸª«"
        else
            INFO+="ðŸ”‹"
        fi

        ;;
    fully-charged)
        INFO+="ðŸ”Œ"
        ;;
    *)
        INFO+=" unknown"
esac

INFO+=" $(date +'%d-%m-%Y %H:%M:%S')"

echo "$INFO" 
